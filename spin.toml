spin_manifest_version = 2

[application]
name = "spin-utopia"
version = "0.1.0"
authors = ["Tyler Harpool <tylerharpool@gmail.com>"]
description = "Swagger API with utopia and spin"

[[trigger.http]]
route = "/..."
component = "spin-utopia"

[component.spin-utopia]
source = "target/wasm32-wasip1/release/spin_utopia.wasm"
allowed_outbound_hosts = []
# Declare all stores that will be used (runtime-config will provide paths)
# Additional stores added for test compatibility
key_value_stores = ["default", "sdny", "edny", "ndca", "cdca", "nybk", "edtx", "fisa", "tax", "generic", "test", "ndny", "wdny", "sdtx", "ndil", "ddc", "district9", "district12"]

[component.spin-utopia.build]
command = "cargo build --target wasm32-wasip1 --release"
watch = ["src/**/*.rs", "Cargo.toml"]

# Configuration for spin-test
[component.spin-utopia.tool.spin-test]
source = "tests/target/wasm32-wasip1/release/config_tests.wasm"
build = "cargo build --release --target wasm32-wasip1"
workdir = "tests"
